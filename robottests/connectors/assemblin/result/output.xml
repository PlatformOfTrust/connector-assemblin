<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 3.2.2 (Python 3.8.5 on darwin)" generated="20201020 15:55:31.114" rpa="false">
<suite id="s1" name="Connector Tests" source="/Users/daniilsmirnov/Connector Engine/assemblin-connector/robottests/connectors/assemblin/connector_tests.robot">
<test id="s1-t1" name="fetch, 200">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20201020 15:55:31.550" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}}</msg>
<status status="PASS" starttime="20201020 15:55:31.549" endtime="20201020 15:55:31.550"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20201020 15:55:31.550" level="INFO">${now} = 2020-10-20T12:55:31+00:00</msg>
<status status="PASS" starttime="20201020 15:55:31.550" endtime="20201020 15:55:31.550"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:31.550" endtime="20201020 15:55:31.551"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:31.551" endtime="20201020 15:55:31.551"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20201020 15:55:31.551" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree"]}, "timestamp": "202...</msg>
<status status="PASS" starttime="20201020 15:55:31.551" endtime="20201020 15:55:31.552"></status>
</kw>
<msg timestamp="20201020 15:55:31.552" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}, 'timestamp': '202...</msg>
<status status="PASS" starttime="20201020 15:55:31.549" endtime="20201020 15:55:31.552"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20201020 15:55:31.553" level="INFO">${signature} = iTrH22SW61V75ublZFPgiXwXuAi8k4crQedAhX+rqw0=</msg>
<status status="PASS" starttime="20201020 15:55:31.552" endtime="20201020 15:55:31.553"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20201020 15:55:31.553" level="INFO">iTrH22SW61V75ublZFPgiXwXuAi8k4crQedAhX+rqw0=</msg>
<status status="PASS" starttime="20201020 15:55:31.553" endtime="20201020 15:55:31.553"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:31.553" endtime="20201020 15:55:31.554"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:31.554" endtime="20201020 15:55:36.024"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20201020 15:55:36.024" level="INFO">
{
    "type": "object",
    "properties": {
        "@context": {
            "type": "string",
            "default": "https://standards-ontotest.oftrust.net/v2/Context/DataProductOutput/Sensor/"
        },
        "data": {
            "type": "object",
            "properties": {
                "sensors": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "measurements": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "value": {
                                            "type": "string"
                                        },
                                        "@type": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "@type",
                                        "value"
                                    ]
                                }
                            },
                            "id": {
                                "type": "object",
                                "properties": {
                                    "idRoom": {
                                        "type": "string"
                                    },
                                    "idProperty": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "idProperty",
                                    "idRoom"
                                ]
                            }
                        },
                        "required": [
                            "id",
                            "measurements"
                        ]
                    },
                    "default": [
                        {
                            "measurements": [
                                {
                                    "value": "20.200001",
                                    "@type": "MeasureAirTemperatureCelsiusDegree"
                                },
                                {
                                    "value": "433.000000",
                                    "@type": "MeasureAirCO2LevelPPM"
                                }
                            ],
                            "id": {
                                "idRoom": "A4018",
                                "idProperty": "AI200"
                            }
                        }
                    ]
                }
            },
            "required": [
                "sensors"
            ]
        },
        "signature": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "default": "RsaSignature2018"
                },
                "created": {
                    "type": "string",
                    "default": "2020-10-20T12:55:35+00:00"
                },
                "creator": {
                    "type": "string",
                    "default": "https:///assemblin/translator/v1/public.key"
                },
                "signatureValue": {
                    "type": "string",
                    "default": "OU6rRJw47+1P9CEcsr73m05azaRHV+OpS/34zDAY3GlYX4TuW9TWcPJrIo5L6ZUeoV8ulZ96tUVwTOMjLC2+sQYgG+lzxOYCueDfNWh07y1oYo2Yexir4RsMaRdVa4e7x/DTOBjJo6+8t09QlHUqOstyW18vqdhptrQZIFzuzpUD0VC8JxqKwSTJpmJfciiIbjl6TUXLjpKqK/zEz0zk5SSKyN9tnB0dhQvKIrBGUVVDsDNiPSdT5im3DfcRwS/r/iTtPvOHxeoHJUw34JiP285b9YoJN8qC7rXjaHTYVHTTemNLapxOtgGdItxLsByvhzvdA1vFavKkT4dea6cEHi89x1Gu3OtuX+5VMJuji+RypXxBbaCTCHdxQx64pIMsJCV8056M0I4NlPQnv1nW+QbCAj7udiR1GyeJ8y6HaJGMCqY1i+uqrsMHCB6WlRHXTYRBj04oAYCkGL/Po+qUWhta6C0lxL5r+WpLJT08VQ+YqSPZNe8p2JBbhAMSEW6qz/QeDHUAIJo4GIFGNWeBLNdxEIM7uWkuuLfqXdfrOTlVRk0Dx5zfkFrEL/Y4cQai5U3DNzm5nJLV/To0+O5945ZpJuV6skHBFzQeOiewJIWcp0RoYowDDW7EKs3+251VfKJlwE9oOf9WYelkBBmlc8wamjE6xWjXMNN5vEo0fQU="
                }
            },
            "required": [
                "created",
                "creator",
                "signatureValue",
                "type"
            ]
        }
    },
    "required": [
        "@context",
        "data",
        "signature"
    ]
}</msg>
<status status="PASS" starttime="20201020 15:55:36.024" endtime="20201020 15:55:36.041"></status>
</kw>
<status status="PASS" starttime="20201020 15:55:31.552" endtime="20201020 15:55:36.042"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>200</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.042" endtime="20201020 15:55:36.042"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body @context</arg>
<arg>https://standards-ontotest.oftrust.net/v2/Context/DataProductOutput/Sensor/</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.043" endtime="20201020 15:55:36.043"></status>
</kw>
<kw name="Object" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON object.*</doc>
<arguments>
<arg>response body data</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.043" endtime="20201020 15:55:36.044"></status>
</kw>
<kw name="Array" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON array.*</doc>
<arguments>
<arg>response body data sensors</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.044" endtime="20201020 15:55:36.045"></status>
</kw>
<kw name="Array" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON array.*</doc>
<arguments>
<arg>response body data sensors 0 measurements</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.045" endtime="20201020 15:55:36.046"></status>
</kw>
<kw name="Object" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON object.*</doc>
<arguments>
<arg>response body data sensors 0 id</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.046" endtime="20201020 15:55:36.047"></status>
</kw>
<tags>
<tag>bug-0001</tag>
</tags>
<status status="PASS" starttime="20201020 15:55:31.548" endtime="20201020 15:55:36.047" critical="yes"></status>
</test>
<test id="s1-t2" name="fetch, 422, Missing data for timestamp required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20201020 15:55:36.049" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}}</msg>
<status status="PASS" starttime="20201020 15:55:36.048" endtime="20201020 15:55:36.049"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20201020 15:55:36.049" level="INFO">${now} = 2020-10-20T12:55:36+00:00</msg>
<status status="PASS" starttime="20201020 15:55:36.049" endtime="20201020 15:55:36.049"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.049" endtime="20201020 15:55:36.049"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.049" endtime="20201020 15:55:36.050"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20201020 15:55:36.050" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree"]}, "timestamp": "202...</msg>
<status status="PASS" starttime="20201020 15:55:36.050" endtime="20201020 15:55:36.050"></status>
</kw>
<msg timestamp="20201020 15:55:36.050" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}, 'timestamp': '202...</msg>
<status status="PASS" starttime="20201020 15:55:36.048" endtime="20201020 15:55:36.050"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.051" endtime="20201020 15:55:36.051"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20201020 15:55:36.052" level="INFO">${signature} = H43VQDzmlgqK+yqar6AUe9hckDi4V0wKjVhejTgJeVE=</msg>
<status status="PASS" starttime="20201020 15:55:36.051" endtime="20201020 15:55:36.052"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20201020 15:55:36.052" level="INFO">H43VQDzmlgqK+yqar6AUe9hckDi4V0wKjVhejTgJeVE=</msg>
<status status="PASS" starttime="20201020 15:55:36.052" endtime="20201020 15:55:36.052"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.052" endtime="20201020 15:55:36.052"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.052" endtime="20201020 15:55:36.192"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20201020 15:55:36.192" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "integer",
                    "default": 422
                },
                "message": {
                    "type": "object",
                    "properties": {
                        "timestamp": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        }
                    },
                    "required": [
                        "timestamp"
                    ]
                }
            },
            "required": [
                "message",
                "status"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20201020 15:55:36.192" endtime="20201020 15:55:36.194"></status>
</kw>
<status status="PASS" starttime="20201020 15:55:36.051" endtime="20201020 15:55:36.194"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.194" endtime="20201020 15:55:36.195"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.196" endtime="20201020 15:55:36.196"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error message timestamp 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.197" endtime="20201020 15:55:36.197"></status>
</kw>
<tags>
<tag>bug-0001</tag>
</tags>
<status status="PASS" starttime="20201020 15:55:36.047" endtime="20201020 15:55:36.198" critical="yes"></status>
</test>
<test id="s1-t3" name="fetch, 422, Missing data for parameters required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20201020 15:55:36.200" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}}</msg>
<status status="PASS" starttime="20201020 15:55:36.200" endtime="20201020 15:55:36.200"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20201020 15:55:36.201" level="INFO">${now} = 2020-10-20T12:55:36+00:00</msg>
<status status="PASS" starttime="20201020 15:55:36.201" endtime="20201020 15:55:36.201"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.201" endtime="20201020 15:55:36.202"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.202" endtime="20201020 15:55:36.202"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20201020 15:55:36.203" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree"]}, "timestamp": "202...</msg>
<status status="PASS" starttime="20201020 15:55:36.202" endtime="20201020 15:55:36.203"></status>
</kw>
<msg timestamp="20201020 15:55:36.203" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}, 'timestamp': '202...</msg>
<status status="PASS" starttime="20201020 15:55:36.199" endtime="20201020 15:55:36.203"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body}</arg>
<arg>parameters</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.203" endtime="20201020 15:55:36.204"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20201020 15:55:36.204" level="INFO">${signature} = Y6a8VtHfk2vF3xuR9IlvsI7bHeGJLuPA5JKjQSqVcAA=</msg>
<status status="PASS" starttime="20201020 15:55:36.204" endtime="20201020 15:55:36.204"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20201020 15:55:36.205" level="INFO">Y6a8VtHfk2vF3xuR9IlvsI7bHeGJLuPA5JKjQSqVcAA=</msg>
<status status="PASS" starttime="20201020 15:55:36.204" endtime="20201020 15:55:36.205"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.205" endtime="20201020 15:55:36.205"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.205" endtime="20201020 15:55:36.713"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20201020 15:55:36.714" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "default": "External translator returns an invalid response."
                },
                "status": {
                    "type": "integer",
                    "default": 502
                },
                "translator_response": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "integer",
                            "default": 422
                        },
                        "data": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "default": 422
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "parameters": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.ids": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.ids[0].idRoom": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.ids[0].idProperty": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.dataTypes": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.dataTypes[0]": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "parameters",
                                                "parameters.dataTypes",
                                                "parameters.dataTypes[0]",
                                                "parameters.ids",
                                                "parameters.ids[0].idProperty",
                                                "parameters.ids[0].idRoom"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "status"
                                    ]
                                }
                            },
                            "required": [
                                "error"
                            ]
                        }
                    },
                    "required": [
                        "data",
                        "status"
                    ]
                }
            },
            "required": [
                "message",
                "status",
                "translator_response"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20201020 15:55:36.713" endtime="20201020 15:55:36.719"></status>
</kw>
<status status="PASS" starttime="20201020 15:55:36.204" endtime="20201020 15:55:36.719"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.720" endtime="20201020 15:55:36.720"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.721" endtime="20201020 15:55:36.721"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error translator_response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.722" endtime="20201020 15:55:36.722"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.722" endtime="20201020 15:55:36.723"></status>
</kw>
<tags>
<tag>bug-0002</tag>
</tags>
<status status="PASS" starttime="20201020 15:55:36.198" endtime="20201020 15:55:36.723" critical="yes"></status>
</test>
<test id="s1-t4" name="fetch, 422, Missing data for ids required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20201020 15:55:36.725" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}}</msg>
<status status="PASS" starttime="20201020 15:55:36.724" endtime="20201020 15:55:36.725"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20201020 15:55:36.726" level="INFO">${now} = 2020-10-20T12:55:36+00:00</msg>
<status status="PASS" starttime="20201020 15:55:36.725" endtime="20201020 15:55:36.726"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.726" endtime="20201020 15:55:36.726"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.726" endtime="20201020 15:55:36.726"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20201020 15:55:36.727" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree"]}, "timestamp": "202...</msg>
<status status="PASS" starttime="20201020 15:55:36.727" endtime="20201020 15:55:36.727"></status>
</kw>
<msg timestamp="20201020 15:55:36.727" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}, 'timestamp': '202...</msg>
<status status="PASS" starttime="20201020 15:55:36.724" endtime="20201020 15:55:36.728"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>ids</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.728" endtime="20201020 15:55:36.728"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20201020 15:55:36.729" level="INFO">${signature} = i1Z/1ECUSgsvEWn1fVAeakj5GAX5mWcLndEZEwfNnGY=</msg>
<status status="PASS" starttime="20201020 15:55:36.729" endtime="20201020 15:55:36.729"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20201020 15:55:36.729" level="INFO">i1Z/1ECUSgsvEWn1fVAeakj5GAX5mWcLndEZEwfNnGY=</msg>
<status status="PASS" starttime="20201020 15:55:36.729" endtime="20201020 15:55:36.730"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.730" endtime="20201020 15:55:36.730"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:36.730" endtime="20201020 15:55:37.065"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20201020 15:55:37.066" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "default": "External translator returns an invalid response."
                },
                "status": {
                    "type": "integer",
                    "default": 502
                },
                "translator_response": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "integer",
                            "default": 422
                        },
                        "data": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "default": 422
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "parameters.ids": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.ids[0].idRoom": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.ids[0].idProperty": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "parameters.ids",
                                                "parameters.ids[0].idProperty",
                                                "parameters.ids[0].idRoom"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "status"
                                    ]
                                }
                            },
                            "required": [
                                "error"
                            ]
                        }
                    },
                    "required": [
                        "data",
                        "status"
                    ]
                }
            },
            "required": [
                "message",
                "status",
                "translator_response"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20201020 15:55:37.065" endtime="20201020 15:55:37.072"></status>
</kw>
<status status="PASS" starttime="20201020 15:55:36.728" endtime="20201020 15:55:37.072"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.072" endtime="20201020 15:55:37.073"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.073" endtime="20201020 15:55:37.074"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error translator_response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.074" endtime="20201020 15:55:37.074"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.ids 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.075" endtime="20201020 15:55:37.075"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.ids[0].idRoom 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.075" endtime="20201020 15:55:37.076"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.ids[0].idProperty 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.076" endtime="20201020 15:55:37.077"></status>
</kw>
<tags>
<tag>bug-0003</tag>
</tags>
<status status="PASS" starttime="20201020 15:55:36.723" endtime="20201020 15:55:37.077" critical="yes"></status>
</test>
<test id="s1-t5" name="fetch, 422, Missing data for dataTypes required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20201020 15:55:37.078" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}}</msg>
<status status="PASS" starttime="20201020 15:55:37.078" endtime="20201020 15:55:37.078"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20201020 15:55:37.079" level="INFO">${now} = 2020-10-20T12:55:37+00:00</msg>
<status status="PASS" starttime="20201020 15:55:37.079" endtime="20201020 15:55:37.079"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.079" endtime="20201020 15:55:37.079"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.079" endtime="20201020 15:55:37.080"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20201020 15:55:37.080" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree"]}, "timestamp": "202...</msg>
<status status="PASS" starttime="20201020 15:55:37.080" endtime="20201020 15:55:37.080"></status>
</kw>
<msg timestamp="20201020 15:55:37.080" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}, 'timestamp': '202...</msg>
<status status="PASS" starttime="20201020 15:55:37.078" endtime="20201020 15:55:37.080"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>dataTypes</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.081" endtime="20201020 15:55:37.081"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20201020 15:55:37.082" level="INFO">${signature} = +0kuOFKthaS75h/CE7Rj4Fip2lHZPRziXrcgIoDDbf4=</msg>
<status status="PASS" starttime="20201020 15:55:37.081" endtime="20201020 15:55:37.082"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20201020 15:55:37.082" level="INFO">+0kuOFKthaS75h/CE7Rj4Fip2lHZPRziXrcgIoDDbf4=</msg>
<status status="PASS" starttime="20201020 15:55:37.082" endtime="20201020 15:55:37.082"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.082" endtime="20201020 15:55:37.082"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.083" endtime="20201020 15:55:37.598"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20201020 15:55:37.599" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "default": "External translator returns an invalid response."
                },
                "status": {
                    "type": "integer",
                    "default": 502
                },
                "translator_response": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "integer",
                            "default": 422
                        },
                        "data": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "default": 422
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "parameters.dataTypes": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.dataTypes[0]": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "parameters.dataTypes",
                                                "parameters.dataTypes[0]"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "status"
                                    ]
                                }
                            },
                            "required": [
                                "error"
                            ]
                        }
                    },
                    "required": [
                        "data",
                        "status"
                    ]
                }
            },
            "required": [
                "message",
                "status",
                "translator_response"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20201020 15:55:37.599" endtime="20201020 15:55:37.602"></status>
</kw>
<status status="PASS" starttime="20201020 15:55:37.081" endtime="20201020 15:55:37.602"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.602" endtime="20201020 15:55:37.603"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.603" endtime="20201020 15:55:37.604"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error translator_response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.604" endtime="20201020 15:55:37.604"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.dataTypes 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.604" endtime="20201020 15:55:37.605"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.dataTypes[0] 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.605" endtime="20201020 15:55:37.606"></status>
</kw>
<tags>
<tag>bug-0004</tag>
</tags>
<status status="PASS" starttime="20201020 15:55:37.077" endtime="20201020 15:55:37.606" critical="yes"></status>
</test>
<test id="s1-t6" name="fetch, 422, Empty ids">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20201020 15:55:37.607" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}}</msg>
<status status="PASS" starttime="20201020 15:55:37.607" endtime="20201020 15:55:37.608"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20201020 15:55:37.608" level="INFO">${now} = 2020-10-20T12:55:37+00:00</msg>
<status status="PASS" starttime="20201020 15:55:37.608" endtime="20201020 15:55:37.608"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.608" endtime="20201020 15:55:37.608"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.608" endtime="20201020 15:55:37.609"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20201020 15:55:37.609" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree"]}, "timestamp": "202...</msg>
<status status="PASS" starttime="20201020 15:55:37.609" endtime="20201020 15:55:37.609"></status>
</kw>
<msg timestamp="20201020 15:55:37.609" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}, 'timestamp': '202...</msg>
<status status="PASS" starttime="20201020 15:55:37.607" endtime="20201020 15:55:37.610"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>ids=@{EMPTY}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.610" endtime="20201020 15:55:37.610"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20201020 15:55:37.611" level="INFO">${signature} = mZQPN15iwXQWOip7inNAr/NNZJfII3DglA+E+lbf7R0=</msg>
<status status="PASS" starttime="20201020 15:55:37.611" endtime="20201020 15:55:37.611"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20201020 15:55:37.611" level="INFO">mZQPN15iwXQWOip7inNAr/NNZJfII3DglA+E+lbf7R0=</msg>
<status status="PASS" starttime="20201020 15:55:37.611" endtime="20201020 15:55:37.611"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.611" endtime="20201020 15:55:37.612"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.612" endtime="20201020 15:55:37.985"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20201020 15:55:37.986" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "default": "External translator returns an invalid response."
                },
                "status": {
                    "type": "integer",
                    "default": 502
                },
                "translator_response": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "integer",
                            "default": 422
                        },
                        "data": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "default": 422
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "parameters.ids[0].idRoom": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.ids[0].idProperty": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "parameters.ids[0].idProperty",
                                                "parameters.ids[0].idRoom"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "status"
                                    ]
                                }
                            },
                            "required": [
                                "error"
                            ]
                        }
                    },
                    "required": [
                        "data",
                        "status"
                    ]
                }
            },
            "required": [
                "message",
                "status",
                "translator_response"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20201020 15:55:37.985" endtime="20201020 15:55:37.991"></status>
</kw>
<status status="PASS" starttime="20201020 15:55:37.610" endtime="20201020 15:55:37.992"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.992" endtime="20201020 15:55:37.993"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.993" endtime="20201020 15:55:37.994"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error translator_response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.994" endtime="20201020 15:55:37.995"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.ids[0].idRoom 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.995" endtime="20201020 15:55:37.996"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.ids[0].idProperty 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:37.996" endtime="20201020 15:55:37.997"></status>
</kw>
<tags>
<tag>bug-0005</tag>
</tags>
<status status="PASS" starttime="20201020 15:55:37.606" endtime="20201020 15:55:37.997" critical="yes"></status>
</test>
<test id="s1-t7" name="fetch, 422, Empty dataTypes">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20201020 15:55:37.999" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}}</msg>
<status status="PASS" starttime="20201020 15:55:37.999" endtime="20201020 15:55:37.999"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20201020 15:55:38.000" level="INFO">${now} = 2020-10-20T12:55:37+00:00</msg>
<status status="PASS" starttime="20201020 15:55:37.999" endtime="20201020 15:55:38.000"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:38.000" endtime="20201020 15:55:38.000"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:38.000" endtime="20201020 15:55:38.001"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20201020 15:55:38.001" level="INFO">${json_string} = {"productCode": "assemblin-test-1", "parameters": {"ids": [{"idProperty": "AI200", "idRoom": "A4018"}], "dataTypes": ["MeasureAirCO2LevelPPM", "MeasureAirTemperatureCelsiusDegree"]}, "timestamp": "202...</msg>
<status status="PASS" starttime="20201020 15:55:38.001" endtime="20201020 15:55:38.001"></status>
</kw>
<msg timestamp="20201020 15:55:38.002" level="INFO">${body} = {'productCode': 'assemblin-test-1', 'parameters': {'ids': [{'idProperty': 'AI200', 'idRoom': 'A4018'}], 'dataTypes': ['MeasureAirCO2LevelPPM', 'MeasureAirTemperatureCelsiusDegree']}, 'timestamp': '202...</msg>
<status status="PASS" starttime="20201020 15:55:37.998" endtime="20201020 15:55:38.002"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>dataTypes=@{EMPTY}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:38.002" endtime="20201020 15:55:38.002"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20201020 15:55:38.003" level="INFO">${signature} = KDBiF63U0EeU5lr80XkkmgifHdl3sW2s/PYlSDGxRDw=</msg>
<status status="PASS" starttime="20201020 15:55:38.003" endtime="20201020 15:55:38.003"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20201020 15:55:38.004" level="INFO">KDBiF63U0EeU5lr80XkkmgifHdl3sW2s/PYlSDGxRDw=</msg>
<status status="PASS" starttime="20201020 15:55:38.004" endtime="20201020 15:55:38.004"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:38.004" endtime="20201020 15:55:38.004"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:38.004" endtime="20201020 15:55:38.338"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20201020 15:55:38.339" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "default": "External translator returns an invalid response."
                },
                "status": {
                    "type": "integer",
                    "default": 502
                },
                "translator_response": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "integer",
                            "default": 422
                        },
                        "data": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "default": 422
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "parameters.dataTypes[0]": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "parameters.dataTypes[0]"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "status"
                                    ]
                                }
                            },
                            "required": [
                                "error"
                            ]
                        }
                    },
                    "required": [
                        "data",
                        "status"
                    ]
                }
            },
            "required": [
                "message",
                "status",
                "translator_response"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20201020 15:55:38.338" endtime="20201020 15:55:38.346"></status>
</kw>
<status status="PASS" starttime="20201020 15:55:38.003" endtime="20201020 15:55:38.347"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:38.347" endtime="20201020 15:55:38.348"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:38.349" endtime="20201020 15:55:38.350"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error translator_response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:38.350" endtime="20201020 15:55:38.351"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.dataTypes[0] 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20201020 15:55:38.352" endtime="20201020 15:55:38.353"></status>
</kw>
<tags>
<tag>bug-0006</tag>
</tags>
<status status="PASS" starttime="20201020 15:55:37.998" endtime="20201020 15:55:38.353" critical="yes"></status>
</test>
<doc>Assemblin Temperature / CO2 sensors</doc>
<status status="PASS" starttime="20201020 15:55:31.118" endtime="20201020 15:55:38.355"></status>
</suite>
<statistics>
<total>
<stat pass="7" fail="0">Critical Tests</stat>
<stat pass="7" fail="0">All Tests</stat>
</total>
<tag>
<stat pass="2" fail="0">bug-0001</stat>
<stat pass="1" fail="0">bug-0002</stat>
<stat pass="1" fail="0">bug-0003</stat>
<stat pass="1" fail="0">bug-0004</stat>
<stat pass="1" fail="0">bug-0005</stat>
<stat pass="1" fail="0">bug-0006</stat>
</tag>
<suite>
<stat pass="7" fail="0" id="s1" name="Connector Tests">Connector Tests</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
